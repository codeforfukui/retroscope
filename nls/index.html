<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Retroscope NLS Historic Maps</title>
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0" />
<link rel="stylesheet" href="//cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
<script src="//cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="//cdn.rawgit.com/mlevans/leaflet-hash/master/leaflet-hash.js"></script>
<script src="//frogcat.github.io/leaflet-tilelayer-mask/leaflet-tilelayer-mask.js"></script>
<style>
body {
	width: 100%;
	height: 100%;
	overflow: hidden;
}

#map {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}
</style>
</head>
<body>
	<div id="map"></div>
	<script>
		var access_token = "pk.eyJ1IjoiZnJvZ2NhdCIsImEiOiJlYmE4ZTE4ZGEzMDAxNWQ5MWIyYmQ0MmFhN2Q5MDUyMCJ9.2jx0Hl7cJmXX4I7pZ-FtYA";

		var bg = L.tileLayer('https://api.mapbox.com/v4/{mapid}/{z}/{x}/{y}.png?access_token={token}', {
			mapid : "mapbox.streets-satellite",
			token : access_token,
			attribution : "© <a href='https://www.mapbox.com/map-feedback/'>Mapbox</a> "
					+ "© <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap contributors</a>"
		});

		var fg = L.tileLayer.mask('http://nls-0.tileserver.com/nls/{z}/{x}/{y}.jpg', {
			attribution : "Historical maps from 1919-47  <a href='http://geo.nls.uk/maps/api/'>NLS Maps API</a>"
		});

		var opt = L.extend({
			maxZoom : 15,
			minZoom : 1,
			inertia : false,
			layers : [ bg, fg ]
		}, L.Hash.parseHash(location.hash) || {
			zoom : 7,
			center : [ 52, 0 ]
		});

		var map = L.map("map", opt);

		map.on("mousemove", function(e) {
			fg.setCenter(e.containerPoint.x, e.containerPoint.y);
		});

		new L.Hash(map);
	</script>
</body>
</html>



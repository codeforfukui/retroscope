<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Retroscope</title>
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0" />
<link rel="stylesheet" href="//cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
<script src="//cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="//cdn.rawgit.com/mlevans/leaflet-hash/master/leaflet-hash.js"></script>
<script src="//frogcat.github.io/leaflet-tilelayer-mask/leaflet-tilelayer-mask.js"></script>
<style>
body {
	width: 100%;
	height: 100%;
	overflow: hidden;
}

#map {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}
</style>
</head>
<body>
	<div id="map"></div>
	<script>
		var bg = L.tileLayer('http://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg', {
			attribution : '<a href="http://maps.gsi.go.jp/development/">地理院タイル・オルソ画像(国土地理院)</a>'
		});

		var fg = L.tileLayer.mask('http://www.finds.jp/ws/tmc/1.0.0/Kanto_Rapid-900913-L/{z}/{x}/{y}.png', {
			attribution : '<a href="http://habs.dc.affrc.go.jp/">歴史的農業環境閲覧システム(NIAES)</a>',
			maskWidth : (L.Browser.touch ? 256 : 512),
			maskHeight : (L.Browser.touch ? 256 : 512)
		});

		var opt = L.extend({
			maxZoom : 16,
			minZoom : 8,
			inertia : false,
			layers : [ bg, fg ]
		}, L.Hash.parseHash(location.hash) || {
			zoom : 15,
			center : [ 35.670685, 139.785233 ]
		});

		var map = L.map("map", opt);

		map.on(L.Browser.touch ? "click" : "mousemove", function(e) {
			fg.setCenter(e.containerPoint.x, e.containerPoint.y);
		});

		new L.Hash(map);
	</script>
</body>
</html>
